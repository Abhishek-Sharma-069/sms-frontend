<!-- Student list view: table, loading, empty, and error states. -->
<div class="w-full max-w-full p-6 sm:p-8 box-border">
  <!-- Header: title + Add Student CTA. -->
  <header class="flex flex-wrap items-center justify-between gap-4 mb-8 w-full">
    <div>
      <h1 class="text-(--sms-primary) text-2xl font-semibold tracking-tight">Student Management</h1>
      <p class="text-(--sms-secondary) text-sm mt-1">View and manage students</p>
    </div>
    <a routerLink="/students/add" class="bg-(--sms-accent) text-(--sms-primary) border-none rounded-lg px-4 py-2.5 text-[0.875rem] font-semibold inline-flex items-center gap-2 no-underline transition-all shadow-[0_1px_3px_rgba(26,50,99,0.15)] hover:bg-[#e5a84a] hover:-translate-y-px focus:outline-none focus:ring-2 focus:ring-(--sms-accent) focus:ring-offset-2">
      <i class="bi bi-plus-lg"></i>
      Add Student
    </a>
  </header>

  @if (loading) {
    <div class="w-full bg-[rgba(255,255,255,0.9)] border border-(--sms-secondary) rounded-xl text-(--sms-secondary) box-border flex flex-col items-center justify-center py-16">
      <i class="bi bi-arrow-repeat animate-spin text-3xl opacity-70"></i>
      <p class="mt-3 text-sm">Loading studentsâ€¦</p>
    </div>
  } @else if (error) {
    <div class="w-full bg-[rgba(254,243,199,0.95)] border border-[#d97706] rounded-xl text-[#92400e] box-border px-4 py-4">
      <div class="flex items-center gap-2">
        <i class="bi bi-exclamation-triangle text-lg"></i>
        <span class="font-medium">Error</span>
      </div>
      <p class="mt-1 text-sm">{{ error }}</p>
      <button type="button" (click)="loadStudents()" class="bg-(--sms-secondary) text-white border-none rounded-lg px-3 py-1.5 text-[0.875rem] font-medium cursor-pointer transition-colors mt-3 hover:bg-(--sms-primary)">Retry</button>
    </div>
  } @else if (students.length === 0) {
    <div class="w-full bg-[rgba(255,255,255,0.9)] border border-(--sms-secondary) rounded-xl text-(--sms-secondary) box-border flex flex-col items-center justify-center py-16">
      <i class="bi bi-people text-4xl opacity-70"></i>
      <p class="mt-3 font-medium text-(--sms-primary)">No students yet</p>
      <p class="mt-1 text-sm">Add your first student to get started.</p>
      <a routerLink="/students/add" class="bg-(--sms-accent) text-(--sms-primary) border-none rounded-lg px-4 py-2.5 text-[0.875rem] font-semibold inline-flex items-center gap-2 no-underline transition-all shadow-[0_1px_3px_rgba(26,50,99,0.15)] mt-4 hover:bg-[#e5a84a] hover:-translate-y-px">
        <i class="bi bi-plus-lg"></i>
        Add Student
      </a>
    </div>
  } @else {
    <div class="w-full bg-white border border-(--sms-secondary) rounded-xl overflow-x-auto overflow-y-visible shadow-[0_2px_8px_rgba(26,50,99,0.08)] box-border">
      <table class="w-full min-w-2xl border-collapse table-auto">
        <thead class="bg-(--sms-secondary) text-white">
          <tr>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-left whitespace-nowrap">Name</th>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-left whitespace-nowrap">Email</th>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-left whitespace-nowrap">Course</th>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-left whitespace-nowrap">Marks</th>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-left whitespace-nowrap">Result</th>
            <th class="px-4 py-3 text-[0.875rem] font-semibold text-right whitespace-nowrap">Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (s of students; track s.studentId) {
            <tr class="hover:bg-[rgba(232,226,219,0.5)]">
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg) font-semibold">{{ s.name }}</td>
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg)">{{ s.email }}</td>
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg)">{{ s.course }}</td>
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg)">{{ s.marks }}</td>
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg)">
                <span
                  class="inline-block px-2 py-1 rounded-full text-[0.75rem] font-semibold"
                  [class.bg-[rgba(34,197,94,0.2)]]="s.result === 'Pass'"
                  [class.text-[#166534]]="s.result === 'Pass'"
                  [class.bg-[rgba(239,68,68,0.2)]]="s.result === 'Fail'"
                  [class.text-[#991b1b]]="s.result === 'Fail'"
                  [class.bg-[rgba(84,119,146,0.2)]]="s.result !== 'Pass' && s.result !== 'Fail'"
                  [class.text-(--sms-primary)]]="s.result !== 'Pass' && s.result !== 'Fail'"
                >
                  {{ s.result }}
                </span>
              </td>
              <td class="px-4 py-3 text-[0.875rem] text-(--sms-primary) border-b border-(--sms-bg) text-right whitespace-nowrap">
                <div class="flex items-center justify-end gap-1">
                  <a [routerLink]="['/students/edit', s.studentId]" class="text-(--sms-secondary) p-2 rounded-lg no-underline transition-colors hover:bg-[rgba(84,119,146,0.15)] hover:text-(--sms-primary)" title="Edit">
                    <i class="bi bi-pencil-square"></i>
                  </a>
                  <button
                    type="button"
                    (click)="deleteStudent(s)"
                    class="border-none bg-transparent p-2 rounded-lg text-(--sms-secondary) cursor-pointer transition-colors hover:bg-[rgba(239,68,68,0.15)] hover:text-[#b91c1c]"
                    title="Delete"
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
